{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neilhacker/Desktop/working_on/ostrom_id_copy_2/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/neilhacker/Desktop/working_on/ostrom_id_copy_2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function calculateProof(_x, _x2) {\n  return _calculateProof.apply(this, arguments);\n}\n\nfunction _calculateProof() {\n  _calculateProof = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(preImage, hash) {\n    var _yield$snarkjs$groth, proof, publicSignals, vKey, res;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return snarkjs.groth16.fullProve({\n              x: preImage,\n              hash: hash.toString()\n            }, \"/circuits/hash/circuit.wasm\", \"/circuits/keys/hash/circuit_final.zkey\");\n\n          case 2:\n            _yield$snarkjs$groth = _context.sent;\n            proof = _yield$snarkjs$groth.proof;\n            publicSignals = _yield$snarkjs$groth.publicSignals;\n            _context.next = 7;\n            return fetch(\"/circuits/keys/hash/verification_key.json\").then(function (res) {\n              return res.json();\n            });\n\n          case 7:\n            vKey = _context.sent;\n            _context.next = 10;\n            return snarkjs.groth16.verify(vKey, publicSignals, proof);\n\n          case 10:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _calculateProof.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/neilhacker/Desktop/working_on/ostrom_id_copy_2/prover.js"],"names":["calculateProof","preImage","hash","snarkjs","groth16","fullProve","x","toString","proof","publicSignals","fetch","then","res","json","vKey","verify"],"mappings":";;AAAA,gBAAsBA,cAAtB;AAAA;AAAA;;;6EAAO,iBAA8BC,QAA9B,EAAwCC,IAAxC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEKC,OAAO,CAACC,OAAR,CAAgBC,SAAhB,CAA0B;AAAEC,cAAAA,CAAC,EAAEL,QAAL;AAAeC,cAAAA,IAAI,EAAEA,IAAI,CAACK,QAAL;AAArB,aAA1B,EAAkE,6BAAlE,EAAiG,wCAAjG,CAFL;;AAAA;AAAA;AACKC,YAAAA,KADL,wBACKA,KADL;AACYC,YAAAA,aADZ,wBACYA,aADZ;AAAA;AAAA,mBAIkBC,KAAK,CAAC,2CAAD,CAAL,CAAmDC,IAAnD,CAAwD,UAASC,GAAT,EAAc;AACvF,qBAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,aAFkB,CAJlB;;AAAA;AAIKC,YAAAA,IAJL;AAAA;AAAA,mBAQeX,OAAO,CAACC,OAAR,CAAgBW,MAAhB,CAAuBD,IAAvB,EAA6BL,aAA7B,EAA4CD,KAA5C,CARf;;AAAA;AAQGI,YAAAA,GARH;AAAA,6CAUIA,GAVJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["export async function calculateProof(preImage, hash) {\n    const { proof, publicSignals } =\n      await snarkjs.groth16.fullProve({ x: preImage, hash: hash.toString() }, \"/circuits/hash/circuit.wasm\", \"/circuits/keys/hash/circuit_final.zkey\");\n  \n      const vKey = await fetch(\"/circuits/keys/hash/verification_key.json\").then(function(res) {\n        return res.json();\n      });\n  \n    const res = await snarkjs.groth16.verify(vKey, publicSignals, proof);\n  \n    return res;\n  }\n  \n"]},"metadata":{},"sourceType":"module"}