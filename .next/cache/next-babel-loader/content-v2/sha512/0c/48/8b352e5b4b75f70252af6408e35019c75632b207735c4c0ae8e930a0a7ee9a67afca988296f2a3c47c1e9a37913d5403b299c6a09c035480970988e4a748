{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/neilhacker/Desktop/working_on/ostrom_id_copy_5/pages/testing.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport { Button, Icon, Dimmer } from \"semantic-ui-react\";\nimport Layout from \"../components/Layout\";\nimport PreImageButton from \"../components/PreImageButton\";\nimport HashButton from \"../components/HashButton\";\nimport { Router } from '../routes'; // import web3 from '../ethereum/web3' // use this to automatically scan for metamask\n\nimport Web3 from \"web3\"; // use this to have connect account button\n// import web3Call from \"../ethereum/web3\";\n\nlet web3;\n\nclass CampaignIndex extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      errorTrue: false,\n      errorMessage: \"\",\n      accountAlreadyVerified: false,\n      account: \"No account\",\n      network: \"No network\"\n    });\n\n    _defineProperty(this, \"connectMetaMaskAccount\", async () => {\n      // let web3;\n      let details = await this.getDetails();\n      let netw = details.net;\n      let adr = details.adrr;\n      console.log(netw);\n      console.log(adr);\n      this.setState({\n        network: netw,\n        address: adr.toString()\n      });\n    });\n\n    _defineProperty(this, \"getDetails\", async () => {\n      if (false && typeof window.ethereum !== \"undefined\") {\n        // We are in the browser and metamask is running.\n        await window.ethereum.request({\n          method: \"eth_requestAccounts\"\n        });\n        web3 = new Web3(window.ethereum);\n        var adrr = await ethereum.selectedAddress;\n        var net = ethereum.networkVersion;\n        console.log(\"account\", adrr);\n        console.log(\"netowrk\", net);\n        return {\n          net,\n          adrr\n        }; // this.setState({network: ethereum.networkVersion, address: adr})\n      } else {\n        // We are on the server *OR* the user is not running metamask\n        const provider = new Web3.providers.HttpProvider(\"https://rinkeby.infura.io/v3/675a260276d44f54a06355ce65310ba6\");\n      }\n    });\n\n    _defineProperty(this, \"checkMetaMask\", async () => {\n      try {\n        const accounts = await web3.eth.getAccounts();\n        this.setState({\n          account: accounts[0]\n        });\n        return true;\n      } catch (err) {\n        console.log(\"MetaMask error\");\n        this.setState({\n          errorMessage: \"It looks like you don't have metamask up and running, which you need to use this service\",\n          errorTrue: true\n        });\n        return false;\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 100,\n            marginLeft: 200\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.connectMetaMaskAccount,\n            children: \"click\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Account: \", this.state.account]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Network: \", this.state.network]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default CampaignIndex;","map":{"version":3,"sources":["/Users/neilhacker/Desktop/working_on/ostrom_id_copy_5/pages/testing.js"],"names":["React","Component","Button","Icon","Dimmer","Layout","PreImageButton","HashButton","Router","Web3","web3","CampaignIndex","errorTrue","errorMessage","accountAlreadyVerified","account","network","details","getDetails","netw","net","adr","adrr","console","log","setState","address","toString","window","ethereum","request","method","selectedAddress","networkVersion","provider","providers","HttpProvider","accounts","eth","getAccounts","err","render","marginTop","marginLeft","connectMetaMaskAccount","state"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Button, Icon, Dimmer } from \"semantic-ui-react\";\nimport Layout from \"../components/Layout\";\nimport PreImageButton from \"../components/PreImageButton\";\nimport HashButton from \"../components/HashButton\";\nimport { Router } from '../routes';\n\n// import web3 from '../ethereum/web3' // use this to automatically scan for metamask\nimport Web3 from \"web3\"; // use this to have connect account button\n// import web3Call from \"../ethereum/web3\";\nlet web3; \n\nclass CampaignIndex extends Component {\n  state = {\n    errorTrue: false,\n    errorMessage: \"\",\n    accountAlreadyVerified: false,\n    account: \"No account\",\n    network: \"No network\",\n\n  }\n \n  // componentDidMount = async () => {\n  //   if (typeof window !== \"undefined\" && typeof window.ethereum !== \"undefined\") {\n  //     // We are in the browser and metamask is running.\n  //     // window.ethereum.request({ method: \"eth_requestAccounts\" });\n  //     web3 = new Web3(window.ethereum);\n  //   } else {\n  //     // We are on the server *OR* the user is not running metamask\n  //     const provider = new Web3.providers.HttpProvider(\n  //       \"https://rinkeby.infura.io/v3/675a260276d44f54a06355ce65310ba6\"\n  //     );\n  //   }\n\n  // }\n\n  // componentDidUpdate = async () => {\n  //   this.checkMetaMask();\n\n  // }\n\n  connectMetaMaskAccount = async () => {\n    // let web3;\n    let details = await this.getDetails();\n    let netw = details.net;\n    let adr = details.adrr\n\n    console.log(netw)\n    console.log(adr)\n    this.setState({network: netw, address: adr.toString()})\n\n  }\n\n  getDetails = async () => {\n    if (typeof window !== \"undefined\" && typeof window.ethereum !== \"undefined\") {\n      // We are in the browser and metamask is running.\n      await window.ethereum.request({ method: \"eth_requestAccounts\" });\n      web3 = new Web3(window.ethereum);\n      var adrr = await ethereum.selectedAddress;\n      var net = ethereum.networkVersion;\n\n      console.log(\"account\", adrr)\n      console.log(\"netowrk\", net)\n      return {net,adrr};\n      // this.setState({network: ethereum.networkVersion, address: adr})\n\n    } else {\n      // We are on the server *OR* the user is not running metamask\n      const provider = new Web3.providers.HttpProvider(\n        \"https://rinkeby.infura.io/v3/675a260276d44f54a06355ce65310ba6\"\n      );\n    }\n  }\n\n  checkMetaMask = async () => {\n    try {\n      const accounts = await web3.eth.getAccounts();\n      this.setState({account: accounts[0]})\n      return true;\n\n    } catch (err) {\n        console.log(\"MetaMask error\")\n        this.setState({ \n          errorMessage: \"It looks like you don't have metamask up and running, which you need to use this service\", \n          errorTrue: true });\n        return false;\n    }\n  }\n  render() {\n\n    return (\n        <Layout>\n          <div>\n          <div style={{marginTop: 100, marginLeft: 200}}>\n\n          \n          <button onClick={this.connectMetaMaskAccount}>click</button> \n          <h3>Account: {this.state.account}</h3>    \n          <h3>Network: {this.state.network}</h3>               \n          </div>\n          </div>\n        </Layout>\n    );\n  }\n}\n\nexport default CampaignIndex;\n"]},"metadata":{},"sourceType":"module"}